include ../f103-periph/hwdef.inc
##provides the following
##  PB6   I2C1_SCL   I2C1
##  PB7   I2C1_SDA   I2C1
##  PA11  CAN_RX     CAN
##  PA12  CAN_TX     CAN
##  PA9   USART1_TX  USART1 SPEED_HIGH NODMA
##  PA10  USART1_RX  USART1 SPEED_HIGH NODMA

define CAN_APP_NODE_NAME "org.ardupilot.ap_periph_bluepill_dual_gps"

# board ID for firmware load
undef APJ_BOARD_ID
APJ_BOARD_ID AP_HW_F103_BLUEPILL_GPS_PERIPH

# increase TX size for RTCM
undef HAL_UART_MIN_TX_SIZE
define HAL_UART_MIN_TX_SIZE 256

#our led is different
undef LED
PC13 LED OUTPUT LOW

#GPS2
# USART2, connected to GPS2
PA2 USART2_TX USART2 SPEED_HIGH NODMA
PA3 USART2_RX USART2 SPEED_HIGH NODMA

#we use USART2, so we need to add it
undef SERIAL_ORDER
SERIAL_ORDER EMPTY EMPTY EMPTY USART1 USART2

# MAG
define HAL_PERIPH_ENABLE_MAG

# and support all external compass types
define HAL_PROBE_EXTERNAL_I2C_COMPASSES

# GPS
define HAL_PERIPH_ENABLE_GPS
# restrict backends available on f103:
define AP_GPS_NOVA_ENABLED 0
define AP_GPS_SBF_ENABLED 0
define AP_GPS_GSOF_ENABLED 0

# enable dual GPS and GPS blending
define GPS_MAX_RECEIVERS 2
define GPS_MAX_INSTANCES 2
define HAL_COMPASS_MAX_SENSORS 1
define HAL_GYROFFT_ENABLED 1
